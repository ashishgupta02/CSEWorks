// Stream.OutStream.d
module Stream.OutStream;

//-----------------------------------------------------------------------------------------------
// Done
//-----------------------------------------------------------------------------------------------
public class OutStream {
  private byte[] _data = [];

  //-----------------------------------------------------------------------------------------------
  // Done
  //-----------------------------------------------------------------------------------------------
  public void write(byte value) {
    this._data ~= value;
  }

  //-----------------------------------------------------------------------------------------------
  // Done
  //-----------------------------------------------------------------------------------------------
  public void write(int value) {
	  this._data ~= cast(byte)value;
  }

  //-----------------------------------------------------------------------------------------------
  // Done
  //-----------------------------------------------------------------------------------------------
  public void write(byte[] buffer, int offset, int size) {
    if (size > 0) {
	    this._data ~= buffer[offset .. offset+size];
    }
  }

  //-----------------------------------------------------------------------------------------------
  // Done
  //-----------------------------------------------------------------------------------------------
  public void flush() {
  }

  //-----------------------------------------------------------------------------------------------
  // Done
  //-----------------------------------------------------------------------------------------------
  public byte[] getAllBytes() {
    byte[] request = new byte[this._data.length];
    for (int i = 0; i < this._data.length; i++) {
      request[i] = this._data[i];
    }
    return request;
  }
}
